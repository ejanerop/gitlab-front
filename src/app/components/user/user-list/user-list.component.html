<div fxLayout="row" fxLayoutAlign="center start">
  <div fxFlex="50%" fxFlexAlign="center">
    <mat-card class="card">
      <mat-card-title>
        <div fxLayout="row" fxLayoutAlign="start start">
          <div fxFlex="90%" fxFlexFill>Usuarios</div>
          <div fxFlex="10%" fxFlexFill>
            <button
              mat-raised-button
              color="primary"
              (click)="new()"
              style="float: right"
            >
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </mat-card-title>
      <mat-card-content>
        <table
          mat-table
          [dataSource]="users"
          class="mat-elevation-z8 full-width"
          *ngIf="!loading"
        >
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Usuario</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef>Correo</th>
            <td mat-cell *matCellDef="let element">{{ element.email }}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="role">
            <th mat-header-cell *matHeaderCellDef>Rol</th>
            <td mat-cell *matCellDef="let element">{{ element.role.name }}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="full_name">
            <th mat-header-cell *matHeaderCellDef>Nombre completo</th>
            <td mat-cell *matCellDef="let element">{{ element.full_name }}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="entity">
            <th mat-header-cell *matHeaderCellDef>Entidad</th>
            <td mat-cell *matCellDef="let element">{{ element.entity }}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="w-20">Acciones</th>
            <td mat-cell *matCellDef="let element">
              <div class="btn-row">
                <button
                  type="button"
                  class="m-1"
                  mat-flat-button
                  color="primary"
                  (click)="edit(element)"
                >
                  <mat-icon>mode_edit</mat-icon>
                </button>
                <button
                  type="button"
                  mat-flat-button
                  color="warn"
                  (click)="delete(element)"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
        </table>

        <app-loading [loading]="loading" [height]="20"></app-loading>
      </mat-card-content>
    </mat-card>
  </div>
</div>
